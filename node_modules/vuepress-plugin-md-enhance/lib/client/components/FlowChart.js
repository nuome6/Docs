import{wait as u,decodeData as p,LoadingIcon as c}from"@vuepress/helper/client";import{useEventListener as f,useDebounceFn as m}from"@vueuse/core";import{defineComponent as w,shallowRef as v,ref as i,computed as h,onMounted as g,onUnmounted as y,h as d}from"vue";import"../styles/flowchart.scss";import{f as C}from"../index-D5Lp0y24.js";var D=w({name:"FlowChart",props:{code:{type:String,required:!0},id:{type:String,required:!0},preset:{type:String,default:"vue"}},setup(r){let o=null;const s=v(),l=i(!0),a=i(1),t=h(()=>C[r.preset]),n=e=>e<419?.8:e>1280?1:.9;return g(()=>{Promise.all([import("flowchart.ts"),u(MARKDOWN_ENHANCE_DELAY)]).then(([{parse:e}])=>{o=e(p(r.code)),a.value=n(window.innerWidth),l.value=!1,o.draw(r.id,{...t.value,scale:a.value})}),f("resize",m(()=>{if(o){const e=n(window.innerWidth);a.value!==e&&(a.value=e,o.draw(r.id,{...t.value,scale:e}))}},100))}),y(()=>{o?.clean(),o=null}),()=>[l.value?d(c,{class:"flowchart-loading",height:192}):null,d("div",{ref:s,class:["flowchart-wrapper",r.preset],id:r.id,style:{display:l.value?"none":"block"}})]}});export{D as default};
//# sourceMappingURL=FlowChart.js.map
