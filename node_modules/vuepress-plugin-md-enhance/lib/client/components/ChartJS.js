import{decodeData as h,LoadingIcon as v,wait as y}from"@vuepress/helper/client";import{useMutationObserver as j}from"@vueuse/core";import{defineComponent as w,shallowRef as d,ref as u,computed as S,onMounted as C,watch as b,onUnmounted as A,h as n}from"vue";import"../styles/chartjs.scss";import{g as f}from"../getDarkmodeStatus-DQ0CDr6h.js";const E=(e,r)=>r==="json"?JSON.parse(e):new Function(`let config,__chart_js_config__;
{
${e}
__chart_js_config__=config;
}
return __chart_js_config__;`)();var D=w({name:"ChartJS",props:{config:{type:String,required:!0},id:{type:String,required:!0},title:{type:String,default:""},type:{type:String,default:"json"}},setup(e){const r=d(),l=d(),i=u(!1),s=u(!0),m=S(()=>h(e.config));let c=!1,t;const p=async o=>{const[{default:a}]=await Promise.all([import("chart.js/auto"),c?Promise.resolve():(c=!0,y(MARKDOWN_ENHANCE_DELAY))]);a.defaults.borderColor=o?"#ccc":"#36A2EB",a.defaults.color=o?"#fff":"#000",a.defaults.maintainAspectRatio=!1;const _=E(m.value,e.type),g=l.value.getContext("2d");t?.destroy(),t=new a(g,_),s.value=!1};return C(()=>{i.value=f(),j(document.documentElement,()=>{i.value=f()},{attributeFilter:["class","data-theme"],attributes:!0}),b(i,o=>p(o),{immediate:!0})}),A(()=>{t?.destroy(),t=null}),()=>[e.title?n("div",{class:"chartjs-title"},decodeURIComponent(e.title)):null,s.value?n(v,{class:"chartjs-loading",height:192}):null,n("div",{ref:r,class:"chartjs-wrapper",id:e.id,style:{display:s.value?"none":"block"}},n("canvas",{ref:l,height:400}))]}});export{D as default};
//# sourceMappingURL=ChartJS.js.map
